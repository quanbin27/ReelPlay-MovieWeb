<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- CSS -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/slimselect.css">
	<link rel="stylesheet" href="css/admin.css">
	<script src="../js/logout.js"></script>
	<!-- Icon font -->
	<link rel="stylesheet" href="webfont/tabler-icons.min.css">

	<!-- Favicons -->
	<link rel="icon" type="image/png" href="icon/favicon-32x32.png" sizes="32x32">
	<link rel="apple-touch-icon" href="icon/favicon-32x32.png">

	<meta name="description" content="Online Movies, TV Shows & Cinema HTML Template">
	<meta name="keywords" content="">
	<meta name="author" content="Dmitry Volkov">
	<title>ReelPlayâ€“ Online Movies, TV Shows & Cinema </title>
</head>

<body>
<!-- header -->
<header class="header">
	<div class="header__content">
		<!-- header logo -->
		<a href="index.html" class="header__logo">
			<img src="img/logo.svg" alt="">
		</a>
		<!-- end header logo -->

		<!-- header menu btn -->
		<button class="header__btn" type="button">
			<span></span>
			<span></span>
			<span></span>
		</button>
		<!-- end header menu btn -->
	</div>
</header>
<!-- end header -->

<!-- sidebar -->
<div class="sidebar">
	<!-- sidebar logo -->
	<a href="index.html" class="sidebar__logo">
		<img src="img/logo.svg" alt="">
	</a>
	<!-- end sidebar logo -->

	<!-- sidebar user -->
	<div class="sidebar__user">
		<div class="sidebar__user-img">
			<img src="img/user.svg" alt="">
		</div>

		<div class="sidebar__user-title">
			<span>Admin</span>
		</div>

		<button class="sidebar__user-btn" type="button" onclick="logout()">
			<i class="ti ti-logout"></i>
		</button>
	</div>
	<!-- end sidebar user -->

	<!-- sidebar nav -->
	<div class="sidebar__nav-wrap">
		<ul class="sidebar__nav">
			<li class="sidebar__nav-item">
				<a href="/admin/index" class="sidebar__nav-link"><i class="ti ti-layout-grid"></i> <span>Dashboard</span></a>
			</li>

			<li class="sidebar__nav-item">
				<a href="/admin/movie" class="sidebar__nav-link "><i class="ti ti-movie"></i> <span>Movies</span></a>
			</li>

			<li class="sidebar__nav-item">
				<a href="/admin/user" class="sidebar__nav-link sidebar__nav-link--active"><i class="ti ti-users"></i> <span>Users</span></a>
			</li>

			<li class="sidebar__nav-item">
				<a href="/admin/actor" class="sidebar__nav-link"><i class="ti ti-users-minus"></i> <span>Actors</span></a>
			</li>

			<li class="sidebar__nav-item">
				<a href="/admin/director" class="sidebar__nav-link"><i class="ti ti-users-minus"></i> <span>Directors</span></a>
			</li>
			<li class="sidebar__nav-item">
				<a href="/admin/episode" class="sidebar__nav-link"><i class="ti ti-badge-hd"></i> <span>Episodes</span></a>
			</li>


			<!-- end dropdown -->

			<li class="sidebar__nav-item">
				<a href="/index" class="sidebar__nav-link"><i class="ti ti-arrow-left"></i> <span>Back to ReelPlay</span></a>
			</li>
		</ul>
	</div>
	<!-- end sidebar nav -->

	<!-- sidebar copyright -->
	<!-- end sidebar copyright -->
</div>
	<!-- end sidebar -->

	<!-- main content -->
	<main class="main">
		<div class="container-fluid">
			<div class="row">
				<!-- main title -->
				<div class="col-12">
					<div class="main__title">
						<h2>Users</h2>

						<span class="main__title-stat"></span>

						<div class="main__title-wrap">


							<!-- search -->
							<form action="#" class="main__title-form">
								<input type="text" id="searchInput" placeholder="Find user..">
								<button type="button" id="searchButton">
									<i class="ti ti-search"></i>
								</button>
							</form>
							<!-- end search -->
						</div>
					</div>
				</div>
				<!-- end main title -->

				<!-- users -->
				<div class="col-12">
					<div class="catalog catalog--1">
						<table class="catalog__table">
							<thead>
								<tr>
									<th>ID</th>
									<th>EMAIL</th>
									<th>FIRST NAME</th>
									<th>LAST NAME</th>
									<th>STATUS</th>
									<th>CREATED DATE</th>
									<th>ACTIONS</th>
								</tr>
							</thead>

							<tbody id="userTableBody">


							</tbody>
						</table>
					</div>
				</div>
				<!-- end users -->

				<!-- paginator -->
				<div class="col-12">
					<div class="main__paginator">
						<!-- amount -->
						<span class="main__paginator-pages"></span>
						<!-- end amount -->

						<ul class="main__paginator-list">
							<li>
								<a href="#" id="prevPage">
									<i class="ti ti-chevron-left"></i>
									<span>Prev</span>
								</a>
							</li>
							<li>
								<a href="#" id="nextPage">
									<span>Next</span>
									<i class="ti ti-chevron-right"></i>
								</a>
							</li>
						</ul>

						<ul class="paginator" id="paginationNumbers">
							<!-- Pagination numbers will be inserted here -->
						</ul>
					</div>
				</div>

				<!-- end paginator -->
			</div>
		</div>
	</main>
	<!-- end main content -->

	<!-- user modal -->
<!--	<div class="modal fade" id="modal-user" tabindex="-1" aria-labelledby="modal-user" aria-hidden="true">-->
<!--		<div class="modal-dialog modal-dialog-centered">-->
<!--			<div class="modal-content">-->
<!--				<div class="modal__content">-->
<!--					<form action="#" class="modal__form">-->
<!--						<h4 class="modal__title">Add User</h4>-->

<!--						<div class="row">-->
<!--							<div class="col-12">-->
<!--								<div class="sign__group">-->
<!--									<label class="sign__label" for="email0">Email</label>-->
<!--									<input id="email0" type="text" name="email0" class="sign__input">-->
<!--								</div>-->
<!--							</div>-->

<!--							<div class="col-12">-->
<!--								<div class="sign__group">-->
<!--									<label class="sign__label" for="pass0">Password</label>-->
<!--									<input id="pass0" type="password" name="pass0" class="sign__input">-->
<!--								</div>-->
<!--							</div>-->
<!--							<div class="col-12">-->
<!--								<div class="sign__group">-->
<!--									<label class="sign__label" for="firstname0">First Name</label>-->
<!--									<input id="firstname0" type="text" name="firstname0" class="sign__input">-->
<!--								</div>-->
<!--							</div>-->
<!--							<div class="col-12">-->
<!--								<div class="sign__group">-->
<!--									<label class="sign__label" for="lastname0">First Name</label>-->
<!--									<input id="lastname0" type="text" name="lastname0" class="sign__input">-->
<!--								</div>-->
<!--							</div>-->

<!--&lt;!&ndash;							<div class="col-12">&ndash;&gt;-->
<!--&lt;!&ndash;								<div class="sign__group">&ndash;&gt;-->
<!--&lt;!&ndash;									<label class="sign__label" for="subscription">Subscription</label>&ndash;&gt;-->
<!--&lt;!&ndash;									<select class="sign__select" id="subscription">&ndash;&gt;-->
<!--&lt;!&ndash;										<option value="Basic">Basic</option>&ndash;&gt;-->
<!--&lt;!&ndash;										<option value="Premium">Premium</option>&ndash;&gt;-->
<!--&lt;!&ndash;										<option value="Cinematic">Cinematic</option>&ndash;&gt;-->
<!--&lt;!&ndash;									</select>&ndash;&gt;-->
<!--&lt;!&ndash;								</div>&ndash;&gt;-->
<!--&lt;!&ndash;							</div>&ndash;&gt;-->

<!--&lt;!&ndash;							<div class="col-12">&ndash;&gt;-->
<!--&lt;!&ndash;								<div class="sign__group">&ndash;&gt;-->
<!--&lt;!&ndash;									<label class="sign__label" for="rights">Rights</label>&ndash;&gt;-->
<!--&lt;!&ndash;									<select class="sign__select" id="rights">&ndash;&gt;-->
<!--&lt;!&ndash;										<option value="User">User</option>&ndash;&gt;-->
<!--&lt;!&ndash;										<option value="Moderator">Moderator</option>&ndash;&gt;-->
<!--&lt;!&ndash;										<option value="Admin">Admin</option>&ndash;&gt;-->
<!--&lt;!&ndash;									</select>&ndash;&gt;-->
<!--&lt;!&ndash;								</div>&ndash;&gt;-->
<!--&lt;!&ndash;							</div>&ndash;&gt;-->

<!--							<div class="col-12 col-lg-6 offset-lg-3">-->
<!--								<button type="button" class="sign__btn sign__btn&#45;&#45;modal">Add</button>-->
<!--							</div>	-->
<!--						</div>-->
<!--					</form>-->
<!--				</div>-->
<!--			</div>-->
<!--		</div>-->
<!--	</div>-->
	<!-- end user modal -->

	<!-- status modal -->
<!--	<div class="modal fade" id="modal-status" tabindex="-1" aria-labelledby="modal-status" aria-hidden="true">-->
<!--		<div class="modal-dialog modal-dialog-centered">-->
<!--			<div class="modal-content">-->
<!--				<div class="modal__content">-->
<!--					<form action="#" class="modal__form">-->
<!--						<h4 class="modal__title">Status change</h4>-->

<!--						<p class="modal__text">Are you sure about immediately change status?</p>-->

<!--						<div class="modal__btns">-->
<!--							<button class="modal__btn modal__btn&#45;&#45;apply" type="button"><span>Apply</span></button>-->
<!--							<button class="modal__btn modal__btn&#45;&#45;dismiss" type="button" data-bs-dismiss="modal" aria-label="Close"><span>Dismiss</span></button>-->
<!--						</div>-->
<!--					</form>-->
<!--				</div>-->
<!--			</div>-->
<!--		</div>-->
<!--	</div>-->
	<!-- end status modal -->



	<!-- JS -->
	<script src="js/bootstrap.bundle.min.js"></script>
	<script src="js/slimselect.min.js"></script>
	<script src="js/smooth-scrollbar.js"></script>
	<script src="js/admin.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			const userTableBody = document.getElementById('userTableBody');
			const paginationNumbers = document.getElementById('paginationNumbers');
			const prevPageBtn = document.getElementById('prevPage');
			const nextPageBtn = document.getElementById('nextPage');
			const paginatorInfo = document.querySelector('.main__paginator-pages');
			const searchInput = document.getElementById('searchInput');
			const searchButton = document.getElementById('searchButton');

			const token = localStorage.getItem('token'); // Replace with actual token
			let currentPage = 1;
			const limit = 15;
			let totalPages = 1;
			let keyword = ''; // Initially empty, updated by search

			// Function to load users from API
			function loadUsers(page, keyword = '') {
				fetch(`http://localhost:8080/api/v1/user?keyword=${keyword}&page=${page}&limit=${limit}`, {
					method: 'GET',
					headers: {
						'Authorization': `Bearer ${token}`
					}
				})
						.then(response => response.json())
						.then(data => {
							userTableBody.innerHTML = ''; // Clear existing rows

							if (data.data && data.data.length > 0) {
								data.data.forEach(user => {
									const statusText = user.deleted_at ? 'Locked' : 'Active';
									const statusClass = user.deleted_at ? 'catalog__text--red' : 'catalog__text--green';
									const row = `
                        <tr>
                            <td><div class="catalog__text">${user.id}</div></td>
                            <td>
                                <div class="catalog__user">
                                    <div class="catalog__avatar">
                                        <img src="img/user.svg" alt="">
                                    </div>
                                    <div class="catalog__meta">
                                        <span>${user.email}</span>
                                    </div>
                                </div>
                            </td>
                            <td><div class="catalog__text">${user.firstName}</div></td>
                            <td><div class="catalog__text">${user.lastName}</div></td>
                            <td><div class="catalog__text ${statusClass}">${statusText}</div></td>
                            <td><div class="catalog__text">${new Date(user.created_at).toLocaleDateString()}</div></td>
                            <td>
                                <div class="catalog__btns">
                                    <a href="/admin/edit-user?userId=${user.id}" class="catalog__btn catalog__btn--edit">
                                        <i class="ti ti-edit"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                    `;
									userTableBody.insertAdjacentHTML('beforeend', row);
								});

								// Update pagination information
								totalPages = Math.ceil(data.total / limit);
								paginatorInfo.textContent = `Page ${page} of ${totalPages}`;
								updatePaginationControls(page);
							} else {
								userTableBody.innerHTML = `<tr><td colspan="7">No users found.</td></tr>`;
							}
						})
						.catch(error => {
							console.error('Error loading users:', error);
							userTableBody.innerHTML = `<tr><td colspan="7">Error loading users.</td></tr>`;
						});
			}

			// Function to update pagination controls
			function updatePaginationControls(currentPage) {
				paginationNumbers.innerHTML = ''; // Clear existing pagination numbers

				// Previous button state
				prevPageBtn.parentElement.classList.toggle('disabled', currentPage === 1);

				// Next button state
				nextPageBtn.parentElement.classList.toggle('disabled', currentPage === totalPages);

				// Create pagination numbers dynamically
				for (let i = 1; i <= totalPages; i++) {
					const pageItem = document.createElement('li');
					pageItem.classList.add('paginator__item');
					if (i === currentPage) {
						pageItem.classList.add('paginator__item--active');
					}
					pageItem.innerHTML = `<a href="#">${i}</a>`;
					pageItem.addEventListener('click', function() {
						loadUsers(i, keyword);
					});
					paginationNumbers.appendChild(pageItem);
				}
			}

			// Event listener for the search button
			searchButton.addEventListener('click', function(event) {
				event.preventDefault();
				keyword = searchInput.value.trim();
				currentPage = 1; // Reset to first page on search
				loadUsers(currentPage, keyword);
			});

			// Event listeners for next and previous buttons
			prevPageBtn.addEventListener('click', function(event) {
				event.preventDefault();
				if (currentPage > 1) {
					currentPage--;
					loadUsers(currentPage, keyword);
				}
			});

			nextPageBtn.addEventListener('click', function(event) {
				event.preventDefault();
				if (currentPage < totalPages) {
					currentPage++;
					loadUsers(currentPage, keyword);
				}
			});

			// Initial load
			loadUsers(currentPage);
		});

	</script>
</body>

<!-- Mirrored from hotflix.volkovdesign.com/admin/users.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Oct 2024 14:35:45 GMT -->
</html>